-- Seed fake profiles for testing (FIXED VERSION)
-- First create auth users, then profiles

-- STEP 1: Create auth users (bypass normal signup flow for testing)
-- Note: In production, users should sign up via normal auth flow

INSERT INTO auth.users (
  id,
  instance_id,
  email,
  encrypted_password,
  email_confirmed_at,
  created_at,
  updated_at,
  raw_app_meta_data,
  raw_user_meta_data,
  is_super_admin,
  role,
  aud
) VALUES
('f47ac10b-58cc-4372-a567-0e02b2c3d479', '00000000-0000-0000-0000-000000000000', 'nisa@example.com', crypt('password123', gen_salt('bf')), now(), now(), now(), '{"provider":"email","providers":["email"]}', '{}', false, 'authenticated', 'authenticated'),
('a1b2c3d4-1234-5678-9abc-def123456789', '00000000-0000-0000-0000-000000000000', 'som@example.com', crypt('password123', gen_salt('bf')), now(), now(), now(), '{"provider":"email","providers":["email"]}', '{}', false, 'authenticated', 'authenticated'),
('b2c3d4e5-2345-6789-abcd-ef1234567890', '00000000-0000-0000-0000-000000000000', 'fern@example.com', crypt('password123', gen_salt('bf')), now(), now(), now(), '{"provider":"email","providers":["email"]}', '{}', false, 'authenticated', 'authenticated'),
('c3d4e5f6-3456-789a-bcde-f12345678901', '00000000-0000-0000-0000-000000000000', 'mali@example.com', crypt('password123', gen_salt('bf')), now(), now(), now(), '{"provider":"email","providers":["email"]}', '{}', false, 'authenticated', 'authenticated'),
('d4e5f6a7-4567-89ab-cdef-123456789012', '00000000-0000-0000-0000-000000000000', 'ploy@example.com', crypt('password123', gen_salt('bf')), now(), now(), now(), '{"provider":"email","providers":["email"]}', '{}', false, 'authenticated', 'authenticated'),
('e5f6a7b8-5678-9abc-def1-234567890123', '00000000-0000-0000-0000-000000000000', 'aom@example.com', crypt('password123', gen_salt('bf')), now(), now(), now(), '{"provider":"email","providers":["email"]}', '{}', false, 'authenticated', 'authenticated'),
('f6a7b8c9-6789-abcd-ef12-345678901234', '00000000-0000-0000-0000-000000000000', 'bee@example.com', crypt('password123', gen_salt('bf')), now(), now(), now(), '{"provider":"email","providers":["email"]}', '{}', false, 'authenticated', 'authenticated'),
('a7b8c9d0-789a-bcde-f123-456789012345', '00000000-0000-0000-0000-000000000000', 'mint@example.com', crypt('password123', gen_salt('bf')), now(), now(), now(), '{"provider":"email","providers":["email"]}', '{}', false, 'authenticated', 'authenticated'),
('b8c9d0e1-89ab-cdef-1234-567890123456', '00000000-0000-0000-0000-000000000000', 'bow@example.com', crypt('password123', gen_salt('bf')), now(), now(), now(), '{"provider":"email","providers":["email"]}', '{}', false, 'authenticated', 'authenticated'),
('c9d0e1f2-9abc-def1-2345-678901234567', '00000000-0000-0000-0000-000000000000', 'fai@example.com', crypt('password123', gen_salt('bf')), now(), now(), now(), '{"provider":"email","providers":["email"]}', '{}', false, 'authenticated', 'authenticated'),
('d0e1f2a3-abcd-ef12-3456-789012345678', '00000000-0000-0000-0000-000000000000', 'joy@example.com', crypt('password123', gen_salt('bf')), now(), now(), now(), '{"provider":"email","providers":["email"]}', '{}', false, 'authenticated', 'authenticated'),
('e1f2a3b4-bcde-f123-4567-890123456789', '00000000-0000-0000-0000-000000000000', 'nam@example.com', crypt('password123', gen_salt('bf')), now(), now(), now(), '{"provider":"email","providers":["email"]}', '{}', false, 'authenticated', 'authenticated'),
('f2a3b4c5-cdef-1234-5678-901234567890', '00000000-0000-0000-0000-000000000000', 'pim@example.com', crypt('password123', gen_salt('bf')), now(), now(), now(), '{"provider":"email","providers":["email"]}', '{}', false, 'authenticated', 'authenticated'),
('a3b4c5d6-def1-2345-6789-012345678901', '00000000-0000-0000-0000-000000000000', 'kwan@example.com', crypt('password123', gen_salt('bf')), now(), now(), now(), '{"provider":"email","providers":["email"]}', '{}', false, 'authenticated', 'authenticated'),
('b4c5d6e7-ef12-3456-789a-123456789012', '00000000-0000-0000-0000-000000000000', 'lily@example.com', crypt('password123', gen_salt('bf')), now(), now(), now(), '{"provider":"email","providers":["email"]}', '{}', false, 'authenticated', 'authenticated')
ON CONFLICT (id) DO NOTHING;

-- STEP 2: Create identities for auth users
INSERT INTO auth.identities (
  id,
  user_id,
  identity_data,
  provider,
  last_sign_in_at,
  created_at,
  updated_at
)
SELECT 
  gen_random_uuid(),
  id,
  jsonb_build_object('sub', id::text, 'email', email),
  'email',
  now(),
  now(),
  now()
FROM auth.users
WHERE email LIKE '%@example.com'
ON CONFLICT DO NOTHING;

-- STEP 3: Now insert profiles (same as before)
INSERT INTO public.profiles (
  id,
  email,
  role,
  name,
  age,
  gender,
  bio,
  location,
  height,
  body_type,
  education,
  work,
  children,
  smoking,
  drinking,
  looking_for,
  languages,
  interests,
  profile_image,
  photos,
  online,
  last_seen,
  created_at,
  updated_at
) VALUES
-- Profile 1: Nisa
(
  'f47ac10b-58cc-4372-a567-0e02b2c3d479',
  'nisa@example.com',
  'user',
  'Nisa',
  24,
  'Female',
  'Love to travel and explore new places. Looking for someone to share adventures with.',
  'Bangkok',
  165,
  'Slim',
  'Bachelor''s Degree',
  'Marketing Manager',
  'No children',
  'Non-smoker',
  'Social drinker',
  'Serious relationship',
  ARRAY['Thai', 'English'],
  ARRAY['Travel', 'Photography', 'Yoga', 'Food', 'Music'],
  'https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400&h=600&fit=crop',
  ARRAY['https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400&h=600&fit=crop'],
  true,
  now(),
  now() - interval '2 days',
  now()
),
-- Profile 2: Som
(
  'a1b2c3d4-1234-5678-9abc-def123456789',
  'som@example.com',
  'user',
  'Som',
  30,
  'Female',
  'Marketing professional who loves art and culture. Let''s explore Bangkok together!',
  'Bangkok',
  168,
  'Athletic',
  'Master''s Degree',
  'Digital Marketing',
  'No children',
  'Non-smoker',
  'Social drinker',
  'Casual dating',
  ARRAY['Thai', 'English', 'Japanese'],
  ARRAY['Art', 'Museums', 'Coffee', 'Running', 'Movies'],
  'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=400&h=600&fit=crop',
  ARRAY['https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=400&h=600&fit=crop'],
  true,
  now(),
  now() - interval '1 day',
  now()
),
-- Profile 3: Fern
(
  'b2c3d4e5-2345-6789-abcd-ef1234567890',
  'fern@example.com',
  'user',
  'Fern',
  27,
  'Female',
  'Teacher by day, adventurer by heart. Looking for genuine connections.',
  'Bangkok',
  162,
  'Slim',
  'Bachelor''s Degree',
  'English Teacher',
  'No children',
  'Non-smoker',
  'Non-drinker',
  'Friendship first',
  ARRAY['Thai', 'English'],
  ARRAY['Reading', 'Teaching', 'Hiking', 'Cooking', 'Language Learning'],
  'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=400&h=600&fit=crop',
  ARRAY['https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=400&h=600&fit=crop'],
  false,
  now() - interval '2 hours',
  now() - interval '3 days',
  now()
),
-- Profile 4: Mali
(
  'c3d4e5f6-3456-789a-bcde-f12345678901',
  'mali@example.com',
  'user',
  'Mali',
  26,
  'Female',
  'Yoga instructor and nature lover. Seeking mindful connections.',
  'Chiang Mai',
  170,
  'Athletic',
  'Bachelor''s Degree',
  'Yoga Instructor',
  'No children',
  'Non-smoker',
  'Non-drinker',
  'Serious relationship',
  ARRAY['Thai', 'English'],
  ARRAY['Yoga', 'Meditation', 'Nature', 'Healthy Living', 'Spirituality'],
  'https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=400&h=600&fit=crop',
  ARRAY['https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=400&h=600&fit=crop'],
  false,
  now() - interval '5 hours',
  now() - interval '1 day',
  now()
),
-- Profile 5: Ploy
(
  'd4e5f6a7-4567-89ab-cdef-123456789012',
  'ploy@example.com',
  'user',
  'Ploy',
  25,
  'Female',
  'Foodie and coffee enthusiast. Let''s explore Bangkok''s best cafes together!',
  'Bangkok',
  164,
  'Slim',
  'Bachelor''s Degree',
  'Content Creator',
  'No children',
  'Non-smoker',
  'Social drinker',
  'Casual dating',
  ARRAY['Thai', 'English'],
  ARRAY['Food', 'Coffee', 'Photography', 'Blogging', 'Travel'],
  'https://images.unsplash.com/photo-1517841905240-472988babdf9?w=400&h=600&fit=crop',
  ARRAY['https://images.unsplash.com/photo-1517841905240-472988babdf9?w=400&h=600&fit=crop'],
  true,
  now(),
  now() - interval '4 days',
  now()
),
-- Profile 6: Aom
(
  'e5f6a7b8-5678-9abc-def1-234567890123',
  'aom@example.com',
  'user',
  'Aom',
  28,
  'Female',
  'Beach lover and photographer. Island life is the best life.',
  'Phuket',
  166,
  'Slim',
  'Bachelor''s Degree',
  'Photographer',
  'No children',
  'Non-smoker',
  'Social drinker',
  'Something casual',
  ARRAY['Thai', 'English'],
  ARRAY['Photography', 'Beach', 'Diving', 'Surfing', 'Travel'],
  'https://images.unsplash.com/photo-1488426862026-3ee34a7d66df?w=400&h=600&fit=crop',
  ARRAY['https://images.unsplash.com/photo-1488426862026-3ee34a7d66df?w=400&h=600&fit=crop'],
  false,
  now() - interval '1 day',
  now() - interval '2 days',
  now()
),
-- Profile 7: Bee
(
  'f6a7b8c9-6789-abcd-ef12-345678901234',
  'bee@example.com',
  'user',
  'Bee',
  23,
  'Female',
  'Student and aspiring entrepreneur. Looking for someone ambitious and fun.',
  'Bangkok',
  160,
  'Slim',
  'Bachelor''s Degree',
  'University Student',
  'No children',
  'Non-smoker',
  'Social drinker',
  'Friendship first',
  ARRAY['Thai', 'English', 'Chinese'],
  ARRAY['Business', 'Startup', 'Technology', 'Fashion', 'Networking'],
  'https://images.unsplash.com/photo-1502720705749-871143f0e671?w=400&h=600&fit=crop',
  ARRAY['https://images.unsplash.com/photo-1502720705749-871143f0e671?w=400&h=600&fit=crop'],
  true,
  now(),
  now() - interval '1 day',
  now()
),
-- Profile 8: Mint
(
  'a7b8c9d0-789a-bcde-f123-456789012345',
  'mint@example.com',
  'user',
  'Mint',
  29,
  'Female',
  'Artist and designer. Creative soul seeking meaningful conversations.',
  'Chiang Mai',
  167,
  'Slim',
  'Master''s Degree',
  'Graphic Designer',
  'No children',
  'Non-smoker',
  'Non-drinker',
  'Serious relationship',
  ARRAY['Thai', 'English'],
  ARRAY['Art', 'Design', 'Painting', 'Music', 'Culture'],
  'https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=400&h=600&fit=crop',
  ARRAY['https://images.unsplash.com/photo-1531746020798-e6953c6e8e04?w=400&h=600&fit=crop'],
  false,
  now() - interval '8 hours',
  now() - interval '5 days',
  now()
),
-- Profile 9: Bow
(
  'b8c9d0e1-89ab-cdef-1234-567890123456',
  'bow@example.com',
  'user',
  'Bow',
  26,
  'Female',
  'Fitness enthusiast and health coach. Let''s stay active together!',
  'Bangkok',
  169,
  'Athletic',
  'Bachelor''s Degree',
  'Fitness Coach',
  'No children',
  'Non-smoker',
  'Non-drinker',
  'Serious relationship',
  ARRAY['Thai', 'English'],
  ARRAY['Fitness', 'Health', 'Nutrition', 'Running', 'Cycling'],
  'https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?w=400&h=600&fit=crop',
  ARRAY['https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?w=400&h=600&fit=crop'],
  true,
  now(),
  now() - interval '3 days',
  now()
),
-- Profile 10: Fai
(
  'c9d0e1f2-9abc-def1-2345-678901234567',
  'fai@example.com',
  'user',
  'Fai',
  27,
  'Female',
  'Event planner who loves music festivals and good vibes.',
  'Pattaya',
  163,
  'Slim',
  'Bachelor''s Degree',
  'Event Planner',
  'No children',
  'Non-smoker',
  'Social drinker',
  'Something casual',
  ARRAY['Thai', 'English'],
  ARRAY['Music', 'Festivals', 'Events', 'Dancing', 'Party'],
  'https://images.unsplash.com/photo-1524502397800-2eeaad7c3fe5?w=400&h=600&fit=crop',
  ARRAY['https://images.unsplash.com/photo-1524502397800-2eeaad7c3fe5?w=400&h=600&fit=crop'],
  false,
  now() - interval '1 day',
  now() - interval '1 day',
  now()
),
-- Profile 11: Joy
(
  'd0e1f2a3-abcd-ef12-3456-789012345678',
  'joy@example.com',
  'user',
  'Joy',
  24,
  'Female',
  'Travel blogger exploring Thailand. Let''s create memories together!',
  'Bangkok',
  161,
  'Slim',
  'Bachelor''s Degree',
  'Travel Blogger',
  'No children',
  'Non-smoker',
  'Social drinker',
  'Friendship first',
  ARRAY['Thai', 'English', 'French'],
  ARRAY['Travel', 'Blogging', 'Photography', 'Writing', 'Adventure'],
  'https://images.unsplash.com/photo-1503104834685-7205e8607eb9?w=400&h=600&fit=crop',
  ARRAY['https://images.unsplash.com/photo-1503104834685-7205e8607eb9?w=400&h=600&fit=crop'],
  true,
  now(),
  now() - interval '2 days',
  now()
),
-- Profile 12: Nam
(
  'e1f2a3b4-bcde-f123-4567-890123456789',
  'nam@example.com',
  'user',
  'Nam',
  31,
  'Female',
  'Scuba instructor and ocean lover. Dive into adventure with me!',
  'Krabi',
  168,
  'Athletic',
  'Bachelor''s Degree',
  'Scuba Instructor',
  'No children',
  'Non-smoker',
  'Social drinker',
  'Serious relationship',
  ARRAY['Thai', 'English'],
  ARRAY['Diving', 'Ocean', 'Marine Life', 'Travel', 'Adventure'],
  'https://images.unsplash.com/photo-1509967419530-da38b4704bc6?w=400&h=600&fit=crop',
  ARRAY['https://images.unsplash.com/photo-1509967419530-da38b4704bc6?w=400&h=600&fit=crop'],
  false,
  now() - interval '4 hours',
  now() - interval '6 days',
  now()
),
-- Profile 13: Pim
(
  'f2a3b4c5-cdef-1234-5678-901234567890',
  'pim@example.com',
  'user',
  'Pim',
  25,
  'Female',
  'Writer and bookworm. Looking for someone to share stories with.',
  'Bangkok',
  165,
  'Slim',
  'Master''s Degree',
  'Writer',
  'No children',
  'Non-smoker',
  'Non-drinker',
  'Serious relationship',
  ARRAY['Thai', 'English'],
  ARRAY['Reading', 'Writing', 'Literature', 'Poetry', 'Coffee'],
  'https://images.unsplash.com/photo-1506863530036-1efeddceb993?w=400&h=600&fit=crop',
  ARRAY['https://images.unsplash.com/photo-1506863530036-1efeddceb993?w=400&h=600&fit=crop'],
  true,
  now(),
  now() - interval '1 day',
  now()
),
-- Profile 14: Kwan
(
  'a3b4c5d6-def1-2345-6789-012345678901',
  'kwan@example.com',
  'user',
  'Kwan',
  28,
  'Female',
  'Chef and food lover. Let''s cook up something special together!',
  'Hua Hin',
  166,
  'Average',
  'Bachelor''s Degree',
  'Chef',
  'No children',
  'Non-smoker',
  'Social drinker',
  'Serious relationship',
  ARRAY['Thai', 'English'],
  ARRAY['Cooking', 'Food', 'Restaurants', 'Baking', 'Wine'],
  'https://images.unsplash.com/photo-1496440737103-cd596325d314?w=400&h=600&fit=crop',
  ARRAY['https://images.unsplash.com/photo-1496440737103-cd596325d314?w=400&h=600&fit=crop'],
  false,
  now() - interval '10 hours',
  now() - interval '4 days',
  now()
),
-- Profile 15: Lily
(
  'b4c5d6e7-ef12-3456-789a-123456789012',
  'lily@example.com',
  'user',
  'Lily',
  26,
  'Female',
  'Fashion designer with a passion for sustainability and style.',
  'Bangkok',
  164,
  'Slim',
  'Bachelor''s Degree',
  'Fashion Designer',
  'No children',
  'Non-smoker',
  'Social drinker',
  'Casual dating',
  ARRAY['Thai', 'English'],
  ARRAY['Fashion', 'Design', 'Sustainability', 'Shopping', 'Art'],
  'https://images.unsplash.com/photo-1529139574466-a303027c1d8b?w=400&h=600&fit=crop',
  ARRAY['https://images.unsplash.com/photo-1529139574466-a303027c1d8b?w=400&h=600&fit=crop'],
  true,
  now(),
  now() - interval '3 days',
  now()
)
ON CONFLICT (id) DO NOTHING;

-- Success message
DO $$
BEGIN
  RAISE NOTICE 'âœ… Successfully seeded 15 fake users and profiles';
  RAISE NOTICE 'ðŸ“§ All users have password: password123';
END $$;
